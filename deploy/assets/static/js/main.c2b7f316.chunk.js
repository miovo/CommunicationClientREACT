(this["webpackJsonpphone-client"]=this["webpackJsonpphone-client"]||[]).push([[0],{222:function(e,n,t){e.exports=t(431)},227:function(e,n,t){},228:function(e,n,t){},340:function(e,n){},377:function(e,n){},431:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(212),o=t.n(r),l=(t(227),t(228),t(1)),c=t(20),s=t(11),u=t.n(s),d=t(94),p=t(25),h=t(26),m=t(28),g=t(27),f=t(2),b=t(15),v=t.n(b),C=t(213);function x(e){return Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])})).join("&")}function w(e){var n="";return e instanceof Error&&"undefined"!==typeof e.message?n=e.message:e&&"object"===typeof e&&e.constructor===Object?n=JSON.stringify(e):("string"===typeof e||e instanceof String)&&(n=e),n}function y(){var e=Object(l.a)(["\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n  }\n"]);return y=function(){return e},e}function E(){var e=Object(l.a)(["\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n  }\n"]);return E=function(){return e},e}function k(){var e=Object(l.a)(["\n  height: 9vmin;\n  width: 9vmin;\n  @media (min-width: 400px) {\n    width: 36px;\n    height: 36px;\n  }\n"]);return k=function(){return e},e}function j(){var e=Object(l.a)(["\n  height: 10vmin;\n  width: 10vmin;\n  @media (min-width: 400px) {\n    width: 40px;\n    height: 40px;\n  }\n"]);return j=function(){return e},e}function O(){var e=Object(l.a)(["\n  width: 20vmin;\n  height: 20vmin;\n  margin: 2vmin 3vmin 2vmin 3vmin;\n  @media (min-width: 400px) {\n    width: 80px;\n    height: 80px;\n    margin: 8px 12px 8px 12px;\n  }\n  border: none;\n  text-decoration: none;\n  display: inline-block;\n  border-radius: 50%;\n  outline: none;\n  cursor: pointer;\n  text-align: center;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n  }\n"]);return O=function(){return e},e}var M=function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 50 50",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},e),i.a.createElement("path",{d:"M46.996 39.736c0 1.15-.511 3.387-.99 4.443-.671 1.566-2.461 2.589-3.899 3.387-1.885 1.022-3.802 1.63-5.943 1.63-2.972 0-5.658-1.215-8.374-2.205-1.949-.704-3.835-1.567-5.592-2.653-5.433-3.356-11.984-9.908-15.34-15.34-1.086-1.757-1.949-3.643-2.653-5.592C3.215 20.69 2 18.004 2 15.032c0-2.141.607-4.058 1.63-5.944.8-1.437 1.823-3.227 3.387-3.898 1.056-.479 3.291-.99 4.443-.99.223 0 .448 0 .671.096.671.223 1.374 1.79 1.693 2.43 1.023 1.822 2.013 3.676 3.068 5.465.512.831 1.471 1.853 1.471 2.845 0 1.95-5.784 4.795-5.784 6.519 0 .863.799 1.982 1.245 2.749 3.228 5.817 7.255 9.844 13.072 13.072.767.448 1.886 1.245 2.749 1.245 1.726 0 4.569-5.784 6.519-5.784.99 0 2.012.959 2.845 1.471 1.789 1.055 3.643 2.045 5.465 3.068.64.319 2.205 1.022 2.43 1.693.096.223.096.448.096.671l-.004-.004z",fill:"#fff",fillRule:"nonzero",stroke:"#fff",strokeWidth:1.5}))},T=f.b.button(O(),(function(e){return e.toggled?e.theme.colorToggled:e.theme.color}),(function(e){return e.toggled?e.theme.dialToggled:e.dialActive?e.theme.dialActive:e.theme.dial}),(function(e){return e.theme.dialActive})),L=Object(f.b)((function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 50 50",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},e),i.a.createElement("path",{d:"M5.455 33.309c-.632-.633-1.581-2.145-1.898-2.989-.492-1.23-.069-2.777.283-4.007.475-1.598 1.196-2.987 2.374-4.164 1.635-1.634 3.781-2.442 5.819-3.39 1.46-.685 2.972-1.247 4.535-1.615 4.835-1.14 12.041-1.137 16.874.006 1.563.37 3.075.933 4.533 1.619 2.038.95 4.183 1.759 5.817 3.395 1.177 1.178 1.897 2.566 2.371 4.166.35 1.23.771 2.778.28 4.007-.318.844-1.267 2.354-1.901 2.987-.122.123-.246.246-.421.316-.492.246-1.74-.229-2.268-.406-1.564-.44-3.128-.916-4.692-1.32-.739-.176-1.828-.211-2.374-.757-1.072-1.073.547-5.818-.401-6.766-.475-.475-1.529-.652-2.196-.828-4.974-1.426-9.404-1.428-14.379-.006-.668.175-1.722.352-2.197.826-.949.949.666 5.695-.407 6.767-.544.544-1.634.578-2.374.754-1.564.403-3.128.878-4.693 1.317-.528.176-1.775.65-2.268.404-.175-.07-.299-.193-.422-.316h.005z",fill:"#fff",fillRule:"nonzero",stroke:"#fff",strokeWidth:1.17}))}))(j()),S=Object(f.b)(M)(k()),N=Object(f.b)(T)(E(),(function(e){return e.dialActive?e.theme.dialGreenActive:e.theme.dialGreen}),(function(e){return e.theme.dialGreenActive})),D=Object(f.b)(T)(y(),(function(e){return e.theme.dialRed}),(function(e){return e.theme.dialRedActive}));function A(){var e=Object(l.a)(["\n  position: relative;\n  font-size: 75%;\n  width: 10px;\n  padding: 0.4em 0.3em;\n  border-radius: 2em;\n  background: ",";\n  text-align: center;\n"]);return A=function(){return e},e}function P(){var e=Object(l.a)(["\n  position: absolute;\n  right: -30%;\n  top: 10%;\n  font-size: 100%;\n  padding: 0.4em;\n  background: ",";\n  text-align: center;\n  min-width: 1.5em;\n  font-weight: bold;\n"]);return P=function(){return e},e}function z(){var e=Object(l.a)(["\n  border-radius: 2em;\n  color: white;\n  min-width: 1.5em;\n  font-weight: bold;\n  line-height: 0.75em;\n"]);return z=function(){return e},e}function R(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n"]);return R=function(){return e},e}function I(e){return i.a.createElement(U,null,i.a.createElement("div",{style:{width:"50vw",maxWidth:"100px"}},"auth_fail"===e.img&&i.a.createElement(H,null),"offline"===e.img&&i.a.createElement(_,null),"alert"===e.img&&i.a.createElement(F,null)),i.a.createElement("span",{style:{color:"#94979B",padding:"2vh"}},e.msg))}var U=f.b.div(R()),_=function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 200 147",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",margin:"20px",strokeMiterlimit:2,color:"#94979B"},e),i.a.createElement("path",{d:"M200 106.833c0 22.087-17.92 40-40 40H46.667C20.94 146.833 0 125.893 0 100.167 0 81.52 11.04 65.373 26.873 57.98c-.106-1.46-.206-3.02-.206-4.48C26.667 24.02 50.52.167 80 .167c22.293 0 41.353 13.646 49.373 33.126 4.587-4.06 10.627-6.46 17.294-6.46 14.686 0 26.666 11.98 26.666 26.667 0 5.313-1.56 10.207-4.273 14.373 17.707 4.167 30.94 20 30.94 38.96z",fill:"currentColor"}),i.a.createElement("path",{d:"M140.788 113.306a6.97 6.97 0 01-2.022 4.902l-9.807 9.807a6.999 6.999 0 01-4.902 2.021c-1.8 0-3.604-.719-4.901-2.021l-21.202-21.202-21.203 21.202a6.996 6.996 0 01-4.901 2.021c-1.8 0-3.605-.719-4.902-2.021l-9.807-9.807a7 7 0 01-2.022-4.902c0-1.8.72-3.604 2.022-4.901l21.202-21.203L57.141 66a7 7 0 01-2.022-4.902c0-1.799.72-3.604 2.022-4.901l9.807-9.807a7 7 0 014.902-2.022c1.8 0 3.604.72 4.901 2.022l21.203 21.202 21.202-21.202a6.997 6.997 0 014.901-2.022c1.8 0 3.605.72 4.902 2.022l9.807 9.807a7 7 0 012.022 4.901c0 1.8-.72 3.605-2.022 4.902l-21.202 21.202 21.202 21.203a6.997 6.997 0 012.022 4.901z",fill:"currentColor"}),i.a.createElement("path",{d:"M140.788 113.306a6.97 6.97 0 01-2.022 4.902l-9.807 9.807a6.999 6.999 0 01-4.902 2.021c-1.8 0-3.604-.719-4.901-2.021l-21.202-21.202-21.203 21.202a6.996 6.996 0 01-4.901 2.021c-1.8 0-3.605-.719-4.902-2.021l-9.807-9.807a7 7 0 01-2.022-4.902c0-1.8.72-3.604 2.022-4.901l21.202-21.203L57.141 66a7 7 0 01-2.022-4.902c0-1.799.72-3.604 2.022-4.901l9.807-9.807a7 7 0 014.902-2.022c1.8 0 3.604.72 4.901 2.022l21.203 21.202 21.202-21.202a6.997 6.997 0 014.901-2.022c1.8 0 3.605.72 4.902 2.022l9.807 9.807a7 7 0 012.022 4.901c0 1.8-.72 3.605-2.022 4.902l-21.202 21.202 21.202 21.203a6.997 6.997 0 012.022 4.901z",fill:"#fff"}))},H=function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 200 200",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,color:"#94979B"},e),i.a.createElement("path",{d:"M63.636 90.909h72.728V63.636c0-20.027-16.337-36.363-36.364-36.363-20.027 0-36.364 16.336-36.364 36.363v27.273zm118.182 13.636v81.819c0 7.527-6.109 13.636-13.636 13.636H31.818c-7.527 0-13.636-6.109-13.636-13.636v-81.819c0-7.527 6.109-13.636 13.636-13.636h4.546V63.636C36.364 28.691 65.055 0 100 0c34.945 0 63.636 28.691 63.636 63.636v27.273h4.546c7.527 0 13.636 6.109 13.636 13.636z",fill:"currentColor",fillRule:"nonzero"}),i.a.createElement("path",{d:"M142.834 173.306c0 1.805-.72 3.605-2.021 4.902l-9.808 9.807a6.996 6.996 0 01-4.901 2.021c-1.8 0-3.605-.719-4.902-2.021L100 166.813l-21.202 21.202a6.999 6.999 0 01-4.902 2.021c-1.8 0-3.604-.719-4.901-2.021l-9.808-9.807a6.999 6.999 0 01-2.021-4.902c0-1.8.72-3.604 2.021-4.901l21.203-21.203L59.187 126a6.999 6.999 0 01-2.021-4.902c0-1.799.72-3.604 2.021-4.901l9.808-9.807a6.997 6.997 0 014.901-2.022c1.8 0 3.605.72 4.902 2.022L100 127.592l21.202-21.202a7 7 0 014.902-2.022c1.8 0 3.604.72 4.901 2.022l9.808 9.807a6.998 6.998 0 012.021 4.901c0 1.8-.72 3.605-2.021 4.902l-21.203 21.202 21.203 21.203a6.996 6.996 0 012.021 4.901z",fill:"#fff"}))},F=function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 200 190",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,color:"#94979B"},e),i.a.createElement("path",{d:"M114.288 157.74v-21.21c0-2.007-1.564-3.686-3.571-3.686H89.286c-2.007 0-3.572 1.672-3.572 3.686v21.21c0 2.007 1.565 3.686 3.572 3.686h21.431c2.007 0 3.571-1.672 3.571-3.686zm-.221-41.74l2.007-51.234c0-.671-.335-1.564-1.114-2.122-.672-.557-1.672-1.228-2.679-1.228H87.729c-1.008 0-2.008.671-2.679 1.228-.779.558-1.115 1.672-1.115 2.344L85.836 116c0 1.45 1.671 2.564 3.793 2.564h20.652c2.007 0 3.686-1.114 3.793-2.564h-.007zm-1.564-104.254l85.722 157.159c2.458 4.35 2.343 9.708-.221 14.066a14.28 14.28 0 01-12.28 7.029H14.278c-5.021 0-9.708-2.679-12.279-7.029-2.572-4.351-2.679-9.708-.222-14.066L87.5 11.746a14.203 14.203 0 0112.501-7.479c5.244 0 10.044 2.9 12.502 7.479z",fill:"currentColor",fillRule:"nonzero"}))},B=f.b.div(z()),K=Object(f.b)(B)(P(),"#CC3300"),W=Object(f.b)(B)(A(),"#CC3300");function V(){var e=Object(l.a)(["\n  position: absolute;\n  height: 4px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: auto;\n  ","\n"]);return V=function(){return e},e}function G(){var e=Object(l.a)(["\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n"]);return G=function(){return e},e}function Q(){var e=Object(l.a)(["\n  outline: none;\n  -webkit-appearance: button;\n  -webkit-writing-mode: horizontal-tb !important;\n  text-rendering: auto;\n  word-spacing: normal;\n  text-indent: 0px;\n  text-shadow: none;\n  display: inline-block;\n  text-align: center;\n  align-items: flex-start;\n  box-sizing: border-box;\n  margin: 0em;\n  font: 400 11px system-ui;\n  -webkit-font-smoothing: antialiased;\n\n  color: rgb(34, 34, 34);\n  text-transform: uppercase;\n  font-weight: ",";\n  line-height: 1.1;\n  letter-spacing: 2px;\n  cursor: pointer;\n  margin-right: auto;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-family: inherit;\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  background: none;\n  transition: color 0.2s ease 0s;\n  padding: 12px;\n  overflow: hidden;\n"]);return Q=function(){return e},e}function $(){var e=Object(l.a)(["\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  -webkit-font-smoothing: antialiased;\n  display: flex;\n  position: relative;\n  min-width: 44px;\n  margin-right: auto;\n  margin-left: auto;\n  flex: 0 1 auto;\n"]);return $=function(){return e},e}function Y(){var e=Object(l.a)(["\n  display: flex;\n  margin-left: 12px;\n  margin-right: 12px;\n  border-style: solid;\n  border-width: 0px 0px 1px;\n  border-color: rgb(198, 202, 215);\n  padding: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  -webkit-font-smoothing: antialiased;\n"]);return Y=function(){return e},e}function J(){var e=Object(l.a)(["\n  flex-grow: 0;\n  flex-basis: 2.3em;\n\n  height: 2.3em;\n  width: 100%;\n  z-index: 9999;\n  background: #ffffff;\n"]);return J=function(){return e},e}var Z=f.b.div(J()),q=f.b.div(Y()),X=f.b.div($()),ee=f.b.button(Q(),(function(e){return!0===e.selected?"bold":"normal"})),ne=f.b.span(G()),te=f.b.div(V(),(function(e){return!0===e.selected?"background: #CC3300;":""})),ae=function(e){var n=0;for(var t in e.msgUnreadsCache)n+=e.msgUnreadsCache[t];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{textAlignVertical:"center",textAlign:"center"}},i.a.createElement("h1",null,"Communication Client")),i.a.createElement(Z,null,i.a.createElement(q,null,i.a.createElement(X,null,i.a.createElement(ee,{selected:"sms"===e.selectedChannel,onClick:e.setChannel.bind(null,"sms")},n>0&&i.a.createElement(K,null,n),i.a.createElement(ne,null,"message")),i.a.createElement(te,{selected:"sms"===e.selectedChannel})),i.a.createElement(X,null,i.a.createElement(ee,{selected:"call"===e.selectedChannel,onClick:e.setChannel.bind(null,"call")},null!==e.incomingCall&&i.a.createElement(K,null,i.a.createElement(M,{style:{height:"0.75em"}})),i.a.createElement(ne,null,"phone")),i.a.createElement(te,{selected:"call"===e.selectedChannel})))))};function ie(e){return(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()}function re(e){return e<10?"0".concat(e):"".concat(e)}function oe(e){return e.getFullYear()+re(e.getMonth()+1)+re(e.getDate())}var le={day:"numeric",month:"short"};function ce(e){return function(e){var n=new Date;return oe(e)===oe(n)}(e)?"Today":function(e){var n=new Date;return n.setDate(n.getDate()-1),oe(e)===oe(n)}(e)?"Yesterday":e.toLocaleString("en-US",le)}var se=t(433);function ue(){var e=Object(l.a)(["\n  margin-left: 12px;\n  margin-right: 12px;\n\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-direction: column;\n  padding: 0.4rem 0.5rem 0.4rem 0.5rem;\n\n  border-width: 0px 0px 1px;\n  border-top-style: solid;\n  border-right-style: solid;\n  border-bottom-style: solid;\n  border-left-style: solid;\n  border-color: rgb(198, 202, 215);\n  color: rgb(34, 34, 34);\n  background: #ffffff;\n  cursor: pointer;\n  &:hover {\n    background: #e8e8e8;\n  }\n  &:hover "," {\n    display: inline;\n  }\n"]);return ue=function(){return e},e}function de(){var e=Object(l.a)(["\n  margin-top: 0px;\n  margin-bottom: 0px;\n  flex: 0 0 auto;\n  margin-left: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  vertical-align: middle;\n  display: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return de=function(){return e},e}function pe(){var e=Object(l.a)(["\n  margin-top: 0px;\n  margin-bottom: 0px;\n  flex: 0 0 auto;\n  margin-left: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  vertical-align: middle;\n"]);return pe=function(){return e},e}function he(){var e=Object(l.a)(["\n  font-size: 12px;\n  margin-top: 0px;\n  margin-bottom: 0px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  flex: 0 0 auto;\n"]);return he=function(){return e},e}function me(){var e=Object(l.a)(["\n  flex: 1 1 auto;\n"]);return me=function(){return e},e}function ge(){var e=Object(l.a)(["\n  font-size: 14px;\n  margin-top: 0px;\n  margin-bottom: 0px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 8px;\n  font-weight: bold;\n  overflow: hidden;\n  flex: 0 1 auto;\n"]);return ge=function(){return e},e}function fe(){var e=Object(l.a)(["\n  font-size: 14px;\n  margin: 4px 0 3px 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.2em;\n  max-height: 1.2em;\n  flex: 1 1 auto;\n"]);return fe=function(){return e},e}function be(){var e=Object(l.a)(["\n  -webkit-box-pack: justify;\n  justify-content: space-between;\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-direction: row;\n  align-items: center;\n  vertical-align: middle;\n"]);return be=function(){return e},e}function ve(){var e=Object(l.a)(["\n  -webkit-box-pack: justify;\n  justify-content: space-between;\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-direction: row;\n  align-items: center;\n  vertical-align: middle;\n"]);return ve=function(){return e},e}var Ce=f.b.div(ve()),xe=f.b.div(be()),we=f.b.div(fe()),ye=f.b.div(ge()),Ee=f.b.div(me()),ke=f.b.div(he()),je=f.b.div(pe()),Oe=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 7 12",height:"12px",width:"7px"},i.a.createElement("path",{fill:"#565b73",d:"M1.693.296l4.722 5.17a.814.814 0 010 1.068l-4.722 5.169a.683.683 0 01-1.037 0 .939.939 0 010-1.23l3.956-4.33a.219.219 0 000-.286L.656 1.527a.94.94 0 010-1.231.704.704 0 01.518-.237c.187 0 .374.079.519.237z"})),Me=Object(f.b)((function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 192 209",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,height:"12px",width:"12px"},e),i.a.createElement("path",{d:"M69.792 82.474v78.125c0 2.439-1.901 4.34-4.341 4.34h-8.68c-2.439 0-4.34-1.901-4.34-4.34V82.474c0-2.439 1.901-4.34 4.34-4.34h8.68c2.44 0 4.341 1.901 4.341 4.34zm34.722 0v78.125c0 2.439-1.901 4.34-4.34 4.34h-8.681c-2.439 0-4.34-1.901-4.34-4.34V82.474c0-2.439 1.901-4.34 4.34-4.34h8.681c2.439 0 4.34 1.901 4.34 4.34zm34.722 0v78.125c0 2.439-1.901 4.34-4.34 4.34h-8.681c-2.439 0-4.34-1.901-4.34-4.34V82.474c0-2.439 1.901-4.34 4.34-4.34h8.681c2.439 0 4.34 1.901 4.34 4.34zm17.361 98.203V52.101H35.069v128.576c0 6.511 3.664 10.313 4.341 10.313h112.847c.677 0 4.34-3.802 4.34-10.313zM65.451 34.731h60.764l-6.51-15.868c-.408-.547-1.623-1.354-2.309-1.493H74.401c-.816.139-1.901.946-2.309 1.493l-6.641 15.868zm125.868 4.332v8.689c0 2.439-1.901 4.34-4.34 4.34h-13.021v128.576c0 14.922-9.765 27.665-21.701 27.665H39.41c-11.936 0-21.702-12.205-21.702-27.126V52.083H4.687c-2.439 0-4.34-1.901-4.34-4.34v-8.68c0-2.44 1.901-4.341 4.34-4.341h41.91l9.497-22.647C58.811 5.425 66.944 0 74.132 0h43.403c7.187 0 15.33 5.425 18.038 12.075l9.496 22.647h41.91c2.439 0 4.34 1.901 4.34 4.341z",fill:"currentColor",fillRule:"nonzero"}))}))(de(),"#CC3300"),Te=f.b.div(ue(),Me),Le=function(e){var n=function(n,t){t.stopPropagation(),window.confirm("Are you sure you want to delete all messages to '".concat(n,"' ?"))&&e.deleteThread(n)};return i.a.createElement("div",null,Object.keys(e.channelList).sort((function(n,t){return e.channelList[n].lastMessage&&e.channelList[t].lastMessage?e.channelList[n].lastMessage.timestamp>e.channelList[t].lastMessage.timestamp?-1:1:0})).map((function(t){var a=Object(se.a)(t)?Object(se.a)(t).formatInternational():t;return i.a.createElement(Te,{key:t,onClick:e.selectContact.bind(null,t)},i.a.createElement(Ce,null,i.a.createElement(ye,null,a),i.a.createElement(Ee,null,e.msgUnreadsCache[t]>0&&i.a.createElement(W,null,e.msgUnreadsCache[t])),i.a.createElement(ke,null,e.channelList[t].lastMessage?ie(e.channelList[t].lastMessage.timestamp):""),i.a.createElement(je,null,Oe)),i.a.createElement(xe,null,i.a.createElement(we,null,e.msgCache[t]&&e.msgCache[t][e.msgCache[t].length-1]?e.msgCache[t][e.msgCache[t].length-1].body.replace(/\n[\s\S]*/,"..."):"..."),i.a.createElement(Me,{onClick:n.bind(null,t)})))})))};function Se(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  //justify-content: center;\n  height: 1.8em;\n  margin-left:12px;\n  margin-right:12px;\n  text-decoration: none !important;\n  font-size: 14px;\n  padding: 0.4rem 0.5rem 0.4rem 0.5rem;\n  color: rgb(34, 34, 34);\n  background: #FFFFFF;\n  cursor: pointer;\n  border-width: 0px 0px 1px;\n  border-top-style: solid;\n  border-right-style: solid;\n  border-bottom-style: solid;\n  border-left-style: solid;\n  border-color: rgb(198, 202, 215);\n  &:hover {\n    background: #E8E8E8;\n  }\n"]);return Se=function(){return e},e}var Ne=f.b.div(Se()),De=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",clipRule:"evenodd",viewBox:"0 0 20 20",height:"14px",width:"14px"},i.a.createElement("path",{fill:"#222222",stroke:"#222222",strokeWidth:"1",d:"M10 .5A9.473 9.473 0 00.5 10c0 5.268 4.232 9.5 9.5 9.5s9.5-4.232 9.5-9.5S15.268.5 10 .5zm0 .864c4.75 0 8.636 3.886 8.636 8.636 0 4.75-3.886 8.636-8.636 8.636-4.75 0-8.636-3.886-8.636-8.636 0-4.75 3.886-8.636 8.636-8.636zm.432 3.886v4.318h4.318v.864h-4.318v4.318h-.864v-4.318H5.25v-.864h4.318V5.25h.864z"})),Ae=function(e){return i.a.createElement(Ne,{onClick:e.selectContact.bind(null,"new")},De,i.a.createElement("span",{style:{padding:"5px"}},"New message"))},Pe=t(216);function ze(){var e=Object(l.a)(["\n  margin: 8px 0 0 5px;\n"]);return ze=function(){return e},e}function Re(){var e=Object(l.a)(["\n  width: 50px;\n  height: 50px;\n  animation: ",' 2s linear infinite;\n  background: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDMwIDMwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPgogICAgPHBhdGggZD0iTTE1LDBDNi43LDAgMCw2LjcgMCwxNUMwLDIzLjMgNi43LDMwIDE1LDMwQzIzLjMsMzAgMzAsMjMuMyAzMCwxNUMzMCw2LjcgMjMuMywwIDE1LDBaTTE1LDI2QzguOSwyNiA0LDIxLjEgNCwxNUM0LDguOSA4LjksNCAxNSw0QzIxLjEsNCAyNiw4LjkgMjYsMTVDMjYsMjEuMSAyMS4xLDI2IDE1LDI2Wk0yMS44LDExLjNDMjEuOCwxMyAyMC40LDE0LjQgMTguNywxNC40QzE3LDE0LjQgMTUuNiwxMyAxNS42LDExLjNDMTUuNiw5LjYgMTcsOC4yIDE4LjcsOC4yQzIwLjQsOC4yIDIxLjgsOS42IDIxLjgsMTEuM1pNMjEuOCwxOC43QzIxLjgsMjAuNCAyMC40LDIxLjggMTguNywyMS44QzE3LDIxLjggMTUuNiwyMC40IDE1LjYsMTguN0MxNS42LDE3IDE3LDE1LjYgMTguNywxNS42QzIwLjQsMTUuNiAyMS44LDE3IDIxLjgsMTguN1pNMTQuNCwxOC43QzE0LjQsMjAuNCAxMywyMS44IDExLjMsMjEuOEM5LjYsMjEuOCA4LjIsMjAuNCA4LjIsMTguN0M4LjIsMTcgOS42LDE1LjYgMTEuMywxNS42QzEzLDE1LjYgMTQuNCwxNyAxNC40LDE4LjdaTTE0LjQsMTEuM0MxNC40LDEzIDEzLDE0LjQgMTEuMywxNC40QzkuNiwxNC40IDguMiwxMyA4LjIsMTEuM0M4LjIsOS42IDkuNiw4LjIgMTEuMyw4LjJDMTMsOC4yIDE0LjQsOS42IDE0LjQsMTEuM1oiIHN0eWxlPSJmaWxsOnJnYigxNDgsMTUxLDE1NSk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+Cjwvc3ZnPgo=");\n']);return Re=function(){return e},e}function Ie(){var e=Object(l.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return Ie=function(){return e},e}function Ue(){var e=Object(l.a)(["\n  position: absolute;\n  top: 45%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 100%;\n  color: #94979B;\n"]);return Ue=function(){return e},e}var _e=f.b.div(Ue()),He=Object(f.c)(Ie()),Fe=f.b.div(Re(),He),Be=f.b.div(ze()),Ke=function(e){return i.a.createElement(_e,null,i.a.createElement(Fe,null),i.a.createElement(Be,null,e.text))};function We(){var e=Object(l.a)(["\n  text-align: center;\n  font-size: 12px;\n  color: #565b73;\n  padding-top: 8px;\n"]);return We=function(){return e},e}function Ve(){var e=Object(l.a)(["\n  margin-top: 3px;\n  margin-bottom: 0px;\n  font-size: 12px;\n  line-height: 1.54;\n  overflow-wrap: break-word;\n"]);return Ve=function(){return e},e}function Ge(){var e=Object(l.a)(["\n  font-size: 10px;\n  margin-top: 0px;\n  margin-bottom: 0px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  flex: 0 0 auto;\n"]);return Ge=function(){return e},e}function Qe(){var e=Object(l.a)(["\n  font-size: 10px;\n  margin-top: 0px;\n  margin-bottom: 0px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin-right: 8px;\n  font-weight: bold;\n  overflow: hidden;\n  flex: 0 1 auto;\n"]);return Qe=function(){return e},e}function $e(){var e=Object(l.a)(["\n  -webkit-box-pack: justify;\n  justify-content: space-between;\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-direction: row;\n"]);return $e=function(){return e},e}function Ye(){var e=Object(l.a)(["\n  padding: 5px 12px 8px 12px;\n  margin-left: 0px;\n  position: relative;\n  overflow-x: hidden;\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-direction: column;\n  ","\n  border-radius: 4px;\n"]);return Ye=function(){return e},e}function Je(){var e=Object(l.a)(["\n  flex-direction: column;\n  margin-bottom: 8px;\n  margin-top: 8px;\n  display: flex;\n  position: relative;\n  flex: 1 1 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  min-width: 100px;\n  overflow-x: hidden;\n  ","\n"]);return Je=function(){return e},e}function Ze(){var e=Object(l.a)(["\n  width: 100%;\n"]);return Ze=function(){return e},e}function qe(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: auto;\n  flex-shrink: 1;\n  -webkit-box-flex: 1;\n  flex-grow: 1;\n  overflow-y: auto;\n  padding-left: 12px;\n  padding-right: 12px;\n  position: relative;\n  overflow-x: hidden;\n  flex-flow: row wrap;\n  align-items: stretch;\n  height: 100vh;\n"]);return qe=function(){return e},e}function Xe(){var e=Object(l.a)(["\n  &.type-dark {\n    font-size: 11px;\n    padding: 0.5rem 0.75rem;\n    background-color: #565b73;\n    color: #ffffff;\n    > * {\n      text-align: left;\n    }\n  }\n  &.__react_component_tooltip.place-left::after {\n    border-left: 6px solid #565b73 !important;\n  }\n  &.__react_component_tooltip.place-right::after {\n    border-right: 6px solid #565b73 !important;\n  }\n  &.__react_component_tooltip.place-top::after {\n    border-top: 6px solid #565b73 !important;\n  }\n  &.__react_component_tooltip.place-bottom::after {\n    border-bottom: 6px solid #565b73 !important;\n  }\n"]);return Xe=function(){return e},e}var en=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).attachScrollListener=function(){a.scrollAreaRef.current&&!a.state.scrollListenerAttached&&(a.scrollAreaRef.current.addEventListener("scroll",a.onScroll),a.setState({scrollListenerAttached:!0}))},a.onScroll=function(){a.scrollAreaRef.current.scrollTop<250&&a.canScroll&&(a.canScroll=!1,a.props.fetchAnotherPage().then((function(){a.canScroll=!0})).catch((function(){})))},a.canScroll=!0,a.state={scrollListenerAttached:!1},a.messagesEndRef=i.a.createRef(),a.scrollAreaRef=i.a.createRef(),a}return Object(h.a)(t,[{key:"componentWillUnmount",value:function(){this.scrollAreaRef.current&&this.attachScrollListener&&(this.scrollAreaRef.current.removeEventListener("scroll",this.onScroll),this.setState({scrollListenerAttached:!1}))}},{key:"scrollToBottom",value:function(){this.messagesEndRef.current&&this.messagesEndRef.current.scrollIntoView()}},{key:"componentDidMount",value:function(){this.attachScrollListener(),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){this.attachScrollListener(),(void 0===e.messages&&void 0!==this.props.messages||e.messages&&this.props.messages&&e.messages[e.messages.length-1]!==this.props.messages[this.props.messages.length-1])&&this.scrollToBottom()}},{key:"render",value:function(){var e=null;return"new"===this.props.selectedContact?i.a.createElement(tn,null):void 0===this.props.messages?i.a.createElement(tn,null,i.a.createElement(Ke,{text:"Loading messages..."})):i.a.createElement(tn,{key:"msgListCont",ref:this.scrollAreaRef},i.a.createElement(nn,{key:"tooltip",place:"left",effect:"solid",multiline:!0,delayHide:500,delayShow:500,clickable:!0}),i.a.createElement(an,{key:"msgCanvas"},this.props.messages.map((function(n){return[e===ce(n.timestamp)?null:i.a.createElement(dn,{key:n.timestamp},e=ce(n.timestamp)),i.a.createElement(rn,{key:n.sid,author:n.author},i.a.createElement(on,{author:n.author},i.a.createElement(ln,{key:"header"},i.a.createElement(cn,{key:"author"},n.attributes.fromNumber),i.a.createElement(sn,{key:"timestamp","data-tip":(n.attributes.sid?n.attributes.sid+"<br />":"")+(n.attributes.fromNumber?"From: "+n.attributes.fromNumber+"<br />":"")+(n.attributes.toNumber?"To: "+n.attributes.toNumber+"<br />":"")+(n.attributes.dateCreated?"Date created: "+n.attributes.dateCreated+"<br />":"")+(n.attributes.numSegments?"Sent as "+n.attributes.numSegments+" segment"+(n.attributes.numSegments>1?"s":""):"")},ie(n.timestamp))),i.a.createElement(un,{key:"body"},(t=n.body,t.split("\n").map((function(e,n){return i.a.createElement("span",{key:n},e,i.a.createElement("br",null))}))))))];var t})),i.a.createElement("div",{ref:this.messagesEndRef})))}}]),t}(a.Component),nn=Object(f.b)(Pe.a)(Xe()),tn=f.b.div(qe()),an=f.b.div(Ze()),rn=f.b.div(Je(),(function(e){return"them"===e.author?"\n    align-self: left;\n    margin-left: 0px;\n    margin-right: 44px;\n    ":"\n    align-self: right;\n    margin-left: 44px;\n    margin-right: 0px;\n    "})),on=f.b.div(Ye(),(function(e){return"them"===e.author?"\n    background: #ECEDF1;\n    color: rgb(34, 34, 34);\n    margin-right: auto;\n    ":"\n    background: ".concat("#CC3300",";\n    color: #FFFFFF;\n    margin-left: auto;\n    ")})),ln=f.b.div($e()),cn=f.b.div(Qe()),sn=f.b.div(Ge()),un=f.b.div(Ve()),dn=f.b.div(We()),pn=t(69),hn=t.n(pn);function mn(){var e=Object(l.a)(["\n  padding: 3px 20px 3px 20px;\n  margin:0;\n  display: inline-block\n  background: #fbcbd0;\n  color: #F22F46;\n  border-radius: 9px;\n  font-weight: 400;\n"]);return mn=function(){return e},e}function gn(){var e=Object(l.a)(["\n  text-align: center;\n  padding: 2px;\n  margin: 0;\n"]);return gn=function(){return e},e}function fn(){var e=Object(l.a)(["\n          "," 1s ease-in-out infinite\n        "]);return fn=function(){return e},e}function bn(){var e=Object(l.a)(["\n  flex-grow: 0;\n  flex-shrink: 0;\n  align-self: flex-end;\n  width: 36px;\n  height: 36px;\n  color: rgb(255, 255, 255);\n  padding: 0px;\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  border-radius: 100px;\n  background: ",";\n  margin-left: 8px;\n  ","\n  animation: ",";\n"]);return bn=function(){return e},e}function vn(){var e=Object(l.a)(["\n    0% { opacity: 0.25; }\n   50% { opacity: 0.50; }\n  100% { opacity: 0.25; }\n"]);return vn=function(){return e},e}function Cn(){var e=Object(l.a)(["\n  font-size: 12px;\n  display: block;\n  width: 100vw;\n  resize: none;\n  box-sizing: border-box;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  color: ",";\n  border-width: 0px;\n  border-style: initial;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  background: rgb(236, 237, 241);\n"]);return Cn=function(){return e},e}function xn(){var e=Object(l.a)(["\n  display: flex;\n  align-self: flex-end;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  flex-grow: 1;\n  flex-shrink: 1;\n  width: 100%;\n  box-sizing: border-box;\n  color: rgb(34, 34, 34);\n  overflow: hidden;\n  background: rgb(236, 237, 241);\n  border-radius: 18px;\n"]);return xn=function(){return e},e}function wn(){var e=Object(l.a)(["\n  flex-grow: 1;\n  flex-shrink: 0;\n\n  min-height: 2.5em;\n  max-height: 85px;\n  color: rgb(34, 34, 34);\n  position: relative;\n  overflow-x: hidden;\n\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 0;\n  flex-direction: row;\n  background: #ffffff;\n  padding-top: 8px;\n  padding-bottom: 12px;\n  margin-left: 12px;\n  margin-right: 12px;\n"]);return wn=function(){return e},e}var yn=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ACCENT_COLOR:"#CC3300"}).REACT_APP_RUNTIME_DOMAIN?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ACCENT_COLOR:"#CC3300"}).REACT_APP_RUNTIME_DOMAIN:"")+"/msgOutbound",En=hn()("#CC3300").darken().hex(),kn=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).handleChange=function(e){a.setState({msgText:e.target.value}),a.resizeTextArea(e.target)},a.handleKeyDown=function(e){13===e.keyCode&&(e.shiftKey?a.resizeTextArea(e.target):(e.preventDefault(),e.stopPropagation(),a.handleSend()))},a.handleSend=function(){a.setState({sending:!0});var e=a.props.selectedContact,n=e;"new"===e&&(n=a.normalizePhoneNumber(a.props.newPhoneNumber));var t=x({to:n,body:a.state.msgText,secret:a.props.secret});fetch(yn,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then(function(){var t=Object(d.a)(u.a.mark((function t(i){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==i.status){t.next=6;break}a.setState({msgText:"",sending:!1,error:null}),"new"===e&&(a.props.updateNewPhoneNumber(""),a.props.selectContact(n)),a.resizeTextArea(a.msgTextRef.current),t.next=11;break;case 6:return t.next=8,i.text();case 8:r=t.sent,console.error(i.status,r),a.setState({sending:!1,error:r});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){a.setState({sending:!1,error:"Backend err:"+e}),console.error("Error while sending message:",e)}))},a.state={msgText:"",sending:!1,error:null},a.msgTextRef=i.a.createRef(),a}return Object(h.a)(t,[{key:"resizeTextArea",value:function(e){e.style.height="inherit",e.style.height="".concat(Math.min(e.scrollHeight,82),"px"),e.focus()}},{key:"normalizePhoneNumber",value:function(e){return e.replace(/[()\- ]/g,"")}},{key:"render",value:function(){return[this.state.error?i.a.createElement(Sn,{key:"error"},i.a.createElement(Nn,null,this.state.error)):null,i.a.createElement(jn,{key:"msgComposer"},i.a.createElement(On,{key:"txtAreaContainer"},i.a.createElement(Mn,{rows:"1",autoFocus:!0,placeholder:"Type message",ref:this.msgTextRef,value:this.state.msgText,onChange:this.handleChange,onKeyDown:this.handleKeyDown,disabled:this.state.sending})),i.a.createElement(Ln,{key:"btnSend",disabled:""===this.state.msgText||this.state.sending,sending:this.state.sending,onClick:this.handleSend},Dn))]}}]),t}(a.Component),jn=f.b.div(wn()),On=f.b.div(xn()),Mn=f.b.textarea(Cn(),(function(e){return e.disabled?"#94979B":"rgb(34, 34, 34)"})),Tn=Object(f.c)(vn()),Ln=f.b.button(bn(),"#CC3300",(function(e){return e.disabled?"\n    opacity: 0.5;\n    cursor: default;\n    ":"\n    opacity: 1;\n    cursor: pointer;\n    &:hover { background: ".concat(En,"; }\n    ")}),(function(e){return e.sending?Object(f.a)(fn(),Tn):""})),Sn=f.b.div(gn()),Nn=f.b.div(mn()),Dn=i.a.createElement("svg",{width:"24px",height:"24px",className:"Twilio-Icon-Content",viewBox:"0 0 24 24"},i.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.641 4c.164 0 .27.064.317.193.047.13.023.305-.07.528l-7.19 16.77a.761.761 0 01-.237.36.501.501 0 01-.308.114.494.494 0 01-.281-.097.989.989 0 01-.264-.29L8.76 16.92a4.609 4.609 0 00-.73-.905 5.269 5.269 0 00-.904-.747L2.38 12.314c-.27-.175-.396-.372-.378-.588.017-.217.172-.39.465-.519l16.788-7.12c.07-.023.137-.043.202-.06A.701.701 0 0119.64 4zM7.723 14.266c.117.07.238.155.36.255.124.1.25.208.379.325l8.314-8.455-12.902 5.484 3.85 2.39zm4.342 5.818l5.52-12.92-8.332 8.473c.105.117.202.234.29.351.088.117.16.235.22.352l2.302 3.744z"}));function An(){var e=Object(l.a)(["\n  font-weight: 600;\n  font-size: 15px;\n  display: block;\n  width: 100vw;\n  resize: none;\n  box-sizing: border-box;\n  padding-left: 14px;\n  padding-right: 14px;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  color: ",";\n  border-width: 0px;\n  border-style: initial;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  background: rgb(236, 237, 241);\n"]);return An=function(){return e},e}function Pn(){var e=Object(l.a)(["\n  width: 175px;\n  box-sizing: border-box;\n  color: rgb(34, 34, 34);\n  overflow: hidden;\n  background: rgb(236, 237, 241);\n  border-radius: 10px;\n"]);return Pn=function(){return e},e}function zn(){var e=Object(l.a)(["\n  width: 24px;\n  height: 24px;\n  color: #FFFFFF;\n  padding: 0;\n  margin: 0;\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  border-radius: 100px;\n  background: ",";\n  cursor: pointer;\n  &:hover {\n    background: ",";\n  }\n"]);return zn=function(){return e},e}function Rn(){var e=Object(l.a)(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n"]);return Rn=function(){return e},e}function In(){var e=Object(l.a)(["\n  font-weight: 600;\n"]);return In=function(){return e},e}function Un(){var e=Object(l.a)(["\n  flex-grow: 0;\n  flex-shrink: 0;\n  background: #ffffff;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 2.5em;\n  margin-left: 12px;\n  margin-right: 12px;\n  border-style: solid;\n  border-width: 0px 0px 1px;\n  border-color: rgb(198, 202, 215);\n"]);return Un=function(){return e},e}var _n=hn()("#CC3300").darken().hex();var Hn=function(e){if("new"===e.selectedContact)return i.a.createElement(Fn,null,i.a.createElement(Kn,{key:"Lspacer"},i.a.createElement(Wn,{onClick:e.back},Vn)),i.a.createElement(Gn,{key:"inputContainer"},i.a.createElement(Qn,{placeholder:"Type phone number",onChange:e.updateNewPhoneNumber,value:e.newPhoneNumber})),i.a.createElement(Kn,{key:"Rspacer"}));var n=Object(se.a)(e.selectedContact)?Object(se.a)(e.selectedContact).formatInternational():e.selectedContact;return i.a.createElement(Fn,null,i.a.createElement(Kn,{key:"Lspacer"},i.a.createElement(Wn,{onClick:e.back},Vn)),i.a.createElement(Bn,{key:"contactName"},n),i.a.createElement(Kn,{key:"Rspacer"}))},Fn=f.b.div(Un()),Bn=f.b.div(In()),Kn=f.b.div(Rn()),Wn=f.b.button(zn(),"#CC3300",_n),Vn=i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"},i.a.createElement("path",{fill:"#fff",d:"M279.218 115.587l-126.897 121.83c-7.149 6.853-7.149 18.295 0 25.177l126.897 121.801c7.782 7.473 20.068 7.473 27.85 0 8.233-7.909 8.233-21.081 0-29.004L200.789 253.362a4.651 4.651 0 010-6.741l106.279-102.03c8.233-7.909 8.233-21.081 0-29.004A20.133 20.133 0 00293.15 110a20.141 20.141 0 00-13.932 5.587z"})),Gn=f.b.div(Pn()),Qn=f.b.input(An(),(function(e){return e.disabled?"#94979B":"rgb(34, 34, 34)"}));function $n(){var e=Object(l.a)(["\n  flex-grow: 1;\n\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: stretch;\n  height: 100vh;\n  position: relative;\n  overflow-x: hidden;\n"]);return $n=function(){return e},e}var Yn=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).selectContact=function(e){a.setState({selectedContact:e}),null!==e&&(a.fetchMsgsForContact(e),a.props.client.getChannelByUniqueName(e).then((function(n){n.setAllMessagesConsumed().then((function(){a.props.setUnreadsCache(e,0)}))})))},a.deleteThread=function(e){a.props.client.getChannelByUniqueName(e).then((function(n){n.delete(),a.fetchTracker[e]=!1,delete a.msgAddedHandlerTracker[e]}))},a.fetchAnotherPage=function(){return new Promise((function(e,n){var t=a.state.selectedContact;if("new"!==t){var i=a.props.msgPgtrCache[t];i.hasPrevPage?i.prevPage().then((function(n){var i=[];n.items.forEach((function(e){i.push(e)})),a.props.addMsgCachePage(t,i,n),e()})):n("No more messages.")}}))},a.msgAddedHandler=function(e,n){a.props.addMsgCacheMsg(e,n),"us"===n.state.author||e===a.state.selectedContact?a.props.channelList[e].updateLastConsumedMessageIndex(n.state.index).then((function(){a.props.setUnreadMsgs(a.props.channelList[e],e)})):a.props.setUnreadMsgs(a.props.channelList[e],e)},a.fetchMsgsForContact=function(e){"new"!==e&&(void 0!==a.props.msgCache[e]||a.fetchTracker[e]||(a.fetchTracker[e]=!0,a.props.client.getChannelByUniqueName(e).then((function(n){n.getMessages(30).then((function(t){var i=[];t.items.forEach((function(e){i.push(e)})),a.props.setMsgCachePage(e,i,t),a.props.setUnreadMsgs(n,e)})),a.msgAddedHandlerTracker[e]||(a.msgAddedHandlerTracker[e]=!0,n.on("messageAdded",a.msgAddedHandler.bind(null,e)))}))))},a.updateNewPhoneNumber=function(e){e&&e.target?a.setState({newPhoneNumber:e.target.value}):""===e&&a.setState({newPhoneNumber:""})},a.msgAddedHandlerTracker={},a.fetchTracker={},a.state={selectedContact:null,newPhoneNumber:""},a}return Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.channelList&&Object.keys(this.props.channelList).forEach((function(n){e.fetchMsgsForContact(n)}))}},{key:"componentDidUpdate",value:function(){var e=this;this.props.channelList&&Object.keys(this.props.channelList).forEach((function(n){e.fetchMsgsForContact(n)}))}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.msgAddedHandlerTracker).forEach((function(n){e.props.client.getChannelByUniqueName(n).then((function(e){e.removeAllListeners("messageAdded")}))}))}},{key:"render",value:function(){return this.state.selectedContact?i.a.createElement(Jn,null,i.a.createElement(Hn,{key:"msgContactHeader",back:this.selectContact.bind(null,null),selectedContact:this.state.selectedContact,newPhoneNumber:this.state.newPhoneNumber,updateNewPhoneNumber:this.updateNewPhoneNumber}),i.a.createElement(en,{key:"msgList",messages:this.props.msgCache[this.state.selectedContact],fetchAnotherPage:this.fetchAnotherPage,selectedContact:this.state.selectedContact}),i.a.createElement(kn,{key:"msgComposer",secret:this.props.secret,selectedContact:this.state.selectedContact,selectContact:this.selectContact,newPhoneNumber:this.state.newPhoneNumber,updateNewPhoneNumber:this.updateNewPhoneNumber})):null===this.props.channelList?i.a.createElement(Jn,null,i.a.createElement(Ke,{text:"Loading..."})):i.a.createElement(Jn,null,i.a.createElement(Ae,{key:"msgContactAdd",selectContact:this.selectContact}),i.a.createElement(Le,{key:"msgContactList",msgUnreadsCache:this.props.msgUnreadsCache,client:this.props.client,channelList:this.props.channelList,selectContact:this.selectContact,deleteThread:this.deleteThread,msgCache:this.props.msgCache,unreadsCache:this.props.unreadsCache}))}}]),t}(a.Component),Jn=f.b.div($n()),Zn=t(434);function qn(){var e=Object(l.a)(["\n  height: 10vmin;\n  width: 10vmin;\n  @media (min-width: 400px) {\n    width: 40px;\n    height: 40px;\n  }\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n  }\n"]);return qn=function(){return e},e}function Xn(){var e=Object(l.a)(["\n  height: 10vmin;\n  width: 10vmin;\n  @media (min-width: 400px) {\n    width: 40px;\n    height: 40px;\n  }\n"]);return Xn=function(){return e},e}function et(){var e=Object(l.a)(["\n  width: 20vmin;\n  height: 20vmin;\n  margin: 2vmin 3vmin 2vmin 3vmin;\n  @media (min-width: 400px) {\n    width: 80px;\n    height: 80px;\n    margin: 8px 12px 8px 12px;\n  }\n  color: ",";\n  &:hover {\n    color: ",";\n  }\n"]);return et=function(){return e},e}function nt(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-columns: auto auto auto;\n  position: relative;\n  width: 80vmin;\n  padding-top: 5.5vmin;\n  @media (min-width: 400px) {\n    width: 320px;\n    padding-top: 22px;\n  }\n"]);return nt=function(){return e},e}function tt(){var e=Object(l.a)(["\n  font-size: 3vmin;\n  letter-spacing: 0.5vmin;\n  @media (min-width: 400px) {\n    font-size: 12px;\n    letter-spacing: 2px;\n  }\n  font-weight: 500;\n"]);return tt=function(){return e},e}function at(){var e=Object(l.a)(["\n  font-size: 8vmin;\n  @media (min-width: 400px) {\n    font-size: 32px;\n  }\n  font-weight: 600;\n"]);return at=function(){return e},e}var it=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).toggleOn=function(){"0"===a.props.digit&&0===a.tid&&(a.tid=setInterval(a.pressAndHold,600))},a.toggleOff=function(){0!==a.tid&&(clearInterval(a.tid),a.tid=0)},a.pressAndHold=function(){a.suppressClick=!0,clearInterval(a.tid),a.tid=0,"0"===a.props.digit&&a.props.dialPressed(a.props.sub)},a.dialPress=function(){a.suppressClick||a.props.dialPressed(a.props.digit),a.suppressClick=!1},a.tid=0,a.suppressClick=!1,a}return Object(h.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.tid)}},{key:"render",value:function(){return i.a.createElement(T,Object.assign({onClick:this.dialPress,onMouseDown:this.toggleOn,onMouseUp:this.toggleOff,theme:this.props.theme},this.props),i.a.createElement(rt,null,this.props.digit),i.a.createElement("br",null),i.a.createElement(ot,null,this.props.sub))}}]),t}(a.Component);var rt=f.b.span(at()),ot=f.b.span(tt()),lt=f.b.div(nt()),ct=f.b.div(et(),(function(e){return e.dialActive?e.theme.dialActive:e.theme.dial}),(function(e){return e.theme.dialActive})),st=function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 50 50",fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeMiterlimit:5},e),i.a.createElement("path",{d:"M35.714 15.429c1.1 0 1.991.891 1.991 1.99v15.172c0 .525-.209 1.029-.581 1.4-.371.372-.875.58-1.4.58H18.77a2.032 2.032 0 01-1.602-.781l-6.639-8.491a.486.486 0 010-.598l6.658-8.516a1.97 1.97 0 011.552-.756h16.975z",fill:"currentColor",stroke:"currentColor",strokeWidth:1.5}),i.a.createElement("path",{d:"M21.318 29.918a.6.6 0 010-.848l3.646-3.646a.601.601 0 000-.848l-3.646-3.646a.6.6 0 010-.848l.275-.275a.6.6 0 01.849 0l3.645 3.645a.6.6 0 00.849 0l3.665-3.664a.57.57 0 01.81 0l.295.295a.598.598 0 010 .846l-3.647 3.647a.6.6 0 000 .848l3.646 3.646a.6.6 0 010 .848l-.275.275a.6.6 0 01-.849 0l-3.645-3.645a.599.599 0 00-.849 0l-3.645 3.645a.6.6 0 01-.849 0l-.275-.275z",fill:"#222"}))},ut=function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 50 50",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},e),i.a.createElement("path",{d:"M13.29 28.057l-2.731 2.731A15.23 15.23 0 019.424 25v-3.462c0-.946.784-1.73 1.731-1.73.946 0 1.73.784 1.73 1.73V25c0 1.054.163 2.082.405 3.057zm30.128-16.282l-9.763 9.763V25c0 4.76-3.895 8.654-8.654 8.654a8.87 8.87 0 01-2.948-.514l-2.596 2.596a11.942 11.942 0 005.544 1.379c6.679 0 12.115-5.436 12.115-12.115v-3.462c0-.946.784-1.73 1.731-1.73.947 0 1.731.784 1.731 1.73V25c0 8.005-6.058 14.603-13.846 15.468v3.57h6.923c.946 0 1.73.785 1.73 1.731 0 .947-.784 1.731-1.73 1.731H16.347a1.743 1.743 0 01-1.731-1.731c0-.947.784-1.731 1.731-1.731h6.923v-3.57a15.236 15.236 0 01-6.355-2.191l-6.87 6.869a.865.865 0 01-1.244 0l-2.217-2.217a.865.865 0 010-1.244L39.955 8.314a.865.865 0 011.244 0l2.217 2.217a.865.865 0 010 1.244h.002zM33.141 8.206L16.347 25V11.154c0-4.76 3.894-8.654 8.654-8.654 3.731 0 6.923 2.408 8.14 5.706z",fill:"currentColor",fillRule:"nonzero"}))},dt=Object(f.b)(ut)(Xn()),pt=Object(f.b)(ut)(qn(),(function(e){return e.theme.dialRedActive}),(function(e){return e.theme.dial})),ht=function(e){return i.a.createElement(lt,null,[["1","\xa0"],["2","ABC"],["3","DEF"],["4","GHI"],["5","JKL"],["6","MNO"],["7","PQRS"],["8","TUV"],["9","WXYZ"],["*",""],["0","+"],["#",""]].map((function(n){return i.a.createElement(it,Object.assign({key:n[0],digit:n[0],sub:n[1]},e,{dialActive:e.dialActive[n[0]]}))})),e.callActive?[i.a.createElement(ct,{key:"Lspacer"}),i.a.createElement(D,Object.assign({},e,{key:"RedDial",onClick:e.dialPressed.bind(null,"Hangup")}),i.a.createElement(L,null)),i.a.createElement(T,{key:"MuteDial",toggled:e.muted,theme:e.theme,onClick:e.dialPressed.bind(null,"ToggleMute")},e.muted?i.a.createElement(pt,null):i.a.createElement(dt,null))]:[i.a.createElement(ct,{key:"Lspacer"}),i.a.createElement(N,Object.assign({key:"GreenDIal"},e,{onClick:e.dialPressed.bind(null,"Enter"),dialActive:e.dialActive.Enter}),i.a.createElement(S,null)),i.a.createElement(ct,Object.assign({},e,{key:"Rspacer",onClick:e.dialPressed.bind(null,"Backspace"),dialActive:e.dialActive.Backspace}),i.a.createElement(st,{style:{cursor:"pointer"}}))])};function mt(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-columns: auto auto;\n  position: relative;\n  width: 80vmin;\n  margin-top: 83vmin;\n  justify-items: center;\n  @media (min-width: 400px) {\n    width: 320px;\n    margin-top: 332px;\n  }\n"]);return mt=function(){return e},e}function gt(){var e=Object(l.a)(["\n  outline: none;\n  height: 10vmin;\n  width: 66vmin;\n  font-size: 8vmin;\n  text-align: center;\n  padding: 1vmin 3vmin 0.5vmin 3vmin;\n  @media (min-width: 400px) {\n    height: 40px;\n    width: 264px;\n    font-size: 32px;\n    padding: 4px 12px 2px 12px;\n  }\n  border: 0;\n  &:focus {\n    outline: none;\n  }\n"]);return gt=function(){return e},e}function ft(){var e=Object(l.a)(["\n  outline: none;\n  margin-top: 10vmin;\n  border-radius: 10px;\n  height: 6vmin;\n  width: 66vmin;\n  font-size: 4vmin;\n  text-align: center;\n  padding: 20vmin 3vmin 0.5vmin 3vmin;\n  @media (min-width: 400px) {\n    margin-top: 40px;\n    height: 24px;\n    width: 264px;\n    font-size: 16px;\n    padding: 80px 12px 2px 12px;\n  }\n  border: 0;\n  &:focus {\n    outline: none;\n  }\n"]);return ft=function(){return e},e}function bt(){var e=Object(l.a)(["\n  outline: none;\n  margin-top: 10vmin;\n  border-radius: 10px;\n  height: 10vmin;\n  width: 66vmin;\n  font-size: 8vmin;\n  text-align: center;\n  padding: 0.5vmin 3vmin 0.5vmin 3vmin;\n  @media (min-width: 400px) {\n    margin-top: 40px;\n    height: 40px;\n    width: 264px;\n    font-size: 32px;\n    padding: 2px 12px 2px 12px;\n  }\n  border: 0;\n  background: #e8e8e8;\n  color: transparent;\n  text-shadow: 0 0 0 #222222;\n  &:focus {\n    outline: none;\n  }\n"]);return bt=function(){return e},e}function vt(){var e=Object(l.a)(["\n  flex-grow: 1;\n\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: center;\n  height: 100vh;\n  width 100%;\n  position: relative;\n  overflow-x: hidden;\n\n  padding-left: 12px;\n  padding-right: 12px;\n"]);return vt=function(){return e},e}function Ct(){var e=Object(l.a)(["\n  font-size: 4vmin;\n  height: 4vmin;\n  padding: 2vmin;\n  @media (min-width: 400px) {\n    font-size: 16px;\n    height: 16px;\n    padding: 8px;\n  }\n"]);return Ct=function(){return e},e}var xt=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;Object(p.a)(this,t),(a=n.call(this,e)).connectCall=function(){"ready"===a.props.client.status()?(console.log("Dialing",a.props.callDisplay),a.props.setCallConnection(a.props.client.connect({number:a.props.callDisplay})),a.props.getCallConnection().on("mute",(function(e){a.setState({isMuted:e})})),a.props.setCallTypingPN(!1),a.props.setCallNextKeyReset(!0),a.props.setCallStartTime(new Date),a.timer=setTimeout(a.tick,1e3)):console.error("Client is not ready ("+a.props.client.status()+")")},a.tick=function(){var e=new Date;a.setState({elapsedTime:e-a.props.getCallStartTime()}),a.timer=setTimeout(a.tick,1e3-e%1e3)},a.hangupCall=function(){a.props.client.disconnectAll()},a.wrapupCall=function(){clearTimeout(a.timer),a.setState({elapsedTime:null,isMuted:!1}),a.props.getCallConnection()&&a.props.getCallConnection().removeAllListeners("mute")},a.toggleMute=function(){a.props.getCallConnection().mute(!a.props.getCallConnection().isMuted())},a.dialPressed=function(e){var n=a.props.callDisplay;a.props.getCallNextKeyReset()&&e.match(/^[0-9+#*]$/)&&(a.props.setCallDisplay(""),n="",a.props.setCallNextKeyReset(!1)),e.match(/^[0-9#*]$/)?a.updateDisplay(n+e):"Backspace"===e?")"===n.charAt(n.length-1)?a.updateDisplay(n.substr(0,n.length-2)):a.updateDisplay(n.substr(0,n.length-1)):"+"===e&&""===n&&a.updateDisplay("+"),a.numberInputRef.current.focus(),a.runPressEvents(e)},a.dialFakeReset=function(e){void 0!==a.state.dialActive[e]&&a.setState({dialActive:v()(a.state.dialActive,Object(c.a)({},e,{$set:!1}))})},a.dialFakePressed=function(e){void 0!==a.state.dialActive[e]&&a.setState({dialActive:v()(a.state.dialActive,Object(c.a)({},e,{$set:!0}))}),a.runPressEvents(e),setTimeout(a.dialFakeReset.bind(null,e),300)},a.handleKeyUp=function(e){a.dialFakeReset(e.key)},a.handleKeyDown=function(e){if("Backspace"===e.key&&")"===e.target.value.charAt(e.target.selectionStart-1)){var n=a.props.callDisplay;n=n.substr(0,n.length-1),a.props.setCallDisplay(n)}if(!(e.ctrlKey||e.metaKey||e.altKey)){["+","0","1","2","3","4","5","6","7","8","9","*","#","Backspace","Enter"].includes(e.key)?(a.props.getCallNextKeyReset()&&(a.props.setCallDisplay(""),a.props.setCallNextKeyReset(!1)),a.dialFakePressed(e.key)):(e.preventDefault(),e.stopPropagation())}},a.handleChange=function(e){a.updateDisplay(e.target.value)},a.formatNumber=function(e){a.asYouType.reset();var n=a.asYouType.input(e);return""===n?e:n},a.updateDisplay=function(e){if(!0===a.props.getCallTypingPN()){a.asYouType.reset();var n=a.asYouType.input(e);""!==n?a.props.setCallDisplay(n):a.props.setCallDisplay(e)}else a.props.setCallDisplay(e)},a.focusDisplay=function(){a.numberInputRef.current&&a.numberInputRef.current.focus()},a.bindListeners=function(){if(a.props.client&&!a.handlersSet){if(a.props.client.on("disconnect",a.disconnectHandler),a.props.getCallConnection()&&"closed"!==a.props.getCallConnection().status()){a.props.getCallConnection().on("mute",(function(e){a.setState({isMuted:e})})),a.setState({isMuted:a.props.getCallConnection().isMuted()}),a.timer=setTimeout(a.tick,1e3);var e=new Date;a.setState({elapsedTime:e-a.props.getCallStartTime()})}a.handlersSet=!0}},a.acceptIncomingCall=function(e){e?(e.accept(),a.updateDisplay(e.parameters.From),a.props.setCallTypingPN(!1),a.props.setCallNextKeyReset(!0),a.props.setCallStartTime(new Date),a.timer=setTimeout(a.tick,1e3),a.props.getCallConnection().on("mute",(function(e){a.setState({isMuted:e})}))):console.error("No incoming connection found")},a.rejectIncomingCall=function(e){e?e.reject():console.error("No incoming connection found")},a.asYouType=new Zn.a("US"),a.timer=null;var r={};return["0","1","2","3","4","5","6","7","8","9","*","#","Backspace","Enter"].forEach((function(e){r[e]=!1})),a.state={elapsedTime:null,dialActive:r,isMuted:!1,incomingRing:!1,incomingConnection:null},a.numberInputRef=i.a.createRef(),a.disconnectHandler=function(e){console.log("CC: DISCONNECT event fired"),a.wrapupCall()},a.handlersSet=!1,a.theme={color:"#222222",colorToggled:"#FFFFFF",dial:"#E8E8E8",dialActive:"#94979B",dialToggled:"#6f7174",dialGreen:"#36D576",dialGreenActive:"#289f58",dialRed:"#F22F46",dialRedActive:"#B52334"},a}return Object(h.a)(t,[{key:"runPressEvents",value:function(e){if("Enter"===e)this.connectCall();else{if("Backspace"===e)return;"Hangup"===e?this.hangupCall():"ToggleMute"===e?this.toggleMute():this.props.client.activeConnection()&&"0123456789#*".includes(e)&&this.props.client.activeConnection().sendDigits(e)}}},{key:"showTime",value:function(e){var n=new Date(null);return n.setMilliseconds(e),e?(n.getUTCHours()>0?n.getUTCHours()+":":"")+n.toISOString().substr(14,5):""}},{key:"moveCaretToEnd",value:function(e){e.target.selectionStart=e.target.value.length,e.target.selectionEnd=e.target.value.length}},{key:"componentWillUnmount",value:function(){this.props.client.removeListener("disconnect",this.disconnectHandler),this.props.getCallConnection()&&this.props.getCallConnection().removeAllListeners("mute"),clearTimeout(this.timer)}},{key:"componentDidMount",value:function(){this.bindListeners()}},{key:"componentDidUpdate",value:function(e,n){this.bindListeners(),this.focusDisplay()}},{key:"render",value:function(){return this.props.client&&"offline"!==this.props.client.status()?null!==this.props.incomingCall?i.a.createElement(Et,null,i.a.createElement(jt,null,"Incoming call from"),i.a.createElement(Ot,null,this.formatNumber(this.props.incomingCall.parameters.From)),i.a.createElement(Mt,null,i.a.createElement(D,{theme:this.theme,key:"RedDial",onClick:this.rejectIncomingCall.bind(null,this.props.incomingCall)},i.a.createElement(L,null)),i.a.createElement(N,{theme:this.theme,key:"GreenDial",onClick:this.acceptIncomingCall.bind(null,this.props.incomingCall)},i.a.createElement(S,null)))):i.a.createElement(Et,null,i.a.createElement(kt,{value:this.props.callDisplay,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleChange,onFocus:this.moveCaretToEnd,onClick:this.moveCaretToEnd,onBlur:this.focusDisplay,ref:this.numberInputRef}),i.a.createElement(yt,{time:this.showTime(this.state.elapsedTime)}),i.a.createElement(ht,{dialPressed:this.dialPressed,dialActive:this.state.dialActive,theme:this.theme,callActive:void 0!==this.props.client.activeConnection(),muted:this.state.isMuted})):i.a.createElement(Et,null,i.a.createElement(I,{msg:"Voice client is offline",img:"offline"}))}}]),t}(a.Component),wt=f.b.div(Ct());function yt(e){return i.a.createElement(wt,null,e.time)}var Et=f.b.div(vt()),kt=f.b.input(bt()),jt=f.b.div(ft()),Ot=f.b.div(gt()),Mt=f.b.div(mt());function Tt(){var e=Object(l.a)(["\n  flex-grow: 1;\n  height: 100vh;\n"]);return Tt=function(){return e},e}var Lt=f.b.div(Tt()),St=function(e){return"sms"===e.selectedChannel?i.a.createElement(Yn,{client:e.client,channelList:e.channelList,secret:e.secret,msgUnreadsCache:e.msgUnreadsCache,setUnreadMsgs:e.setUnreadMsgs,setUnreadsCache:e.setUnreadsCache,msgCache:e.msgCache,msgPgtrCache:e.msgPgtrCache,addMsgCachePage:e.addMsgCachePage,setMsgCachePage:e.setMsgCachePage,addMsgCacheMsg:e.addMsgCacheMsg}):"call"===e.selectedChannel?i.a.createElement(xt,{client:e.client,incomingCall:e.incomingCall,setCallDisplay:e.setCallDisplay,callDisplay:e.callDisplay,setCallConnection:e.setCallConnection,getCallConnection:e.getCallConnection,setCallStartTime:e.setCallStartTime,getCallStartTime:e.getCallStartTime,setCallNextKeyReset:e.setCallNextKeyReset,getCallNextKeyReset:e.getCallNextKeyReset,setCallTypingPN:e.setCallTypingPN,getCallTypingPN:e.getCallTypingPN}):i.a.createElement(Lt,null,"Channel not supported")},Nt=t(219);function Dt(){var e=Object(l.a)(["\n  display: inline-block;\n  vertical-align: middle;\n"]);return Dt=function(){return e},e}function At(){var e=Object(l.a)(["\n  display: inline-block;\n  width: 4vmin;\n  height: 4vmin;\n  margin-right: 1.5vmin;\n  background: ",";\n  border-radius: 3px;\n  transition: all 150ms;\n  @media (min-width: 400px) {\n    width: 16px;\n    height: 16px;\n    margin-right: 6px;\n  }\n  ",":focus + & {\n    box-shadow: 0 0 0 2px ",";\n  }\n  "," {\n    visibility: ",";\n  }\n"]);return At=function(){return e},e}function Pt(){var e=Object(l.a)(["\n  fill: none;\n  stroke: white;\n  stroke-width: 4px;\n"]);return Pt=function(){return e},e}function zt(){var e=Object(l.a)(["\n  // Hide checkbox visually but remain accessible to screen readers.\n  // Source: https://polished.js.org/docs/#hidevisually\n  border: 0;\n  clip: rect(0 0 0 0);\n  clippath: inset(50%);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]);return zt=function(){return e},e}function Rt(){var e=Object(l.a)(["\n  color: ",";\n"]);return Rt=function(){return e},e}function It(){var e=Object(l.a)(["\n  font-size: 4vmin;\n  @media (min-width: 400px) {\n    font-size: 16px;\n  }\n"]);return It=function(){return e},e}function Ut(){var e=Object(l.a)(["\n  color: #565b73;\n  font-size: 5vmin;\n  @media (min-width: 400px) {\n    font-size: 20px;\n  }\n"]);return Ut=function(){return e},e}function _t(){var e=Object(l.a)(["\n  height: 12vmin;\n  width: 12vmin;\n  color: #565b73;\n  padding: 0;\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  border-radius: 50px;\n  background: rgb(236, 237, 241);\n  cursor: pointer;\n  @media (min-width: 400px) {\n    height: 48px;\n    width: 48px;\n  }\n  &:hover {\n    background: ",";\n    color: #ffffff;\n  }\n"]);return _t=function(){return e},e}function Ht(){var e=Object(l.a)(["\n  outline: none;\n  height: 10vmin;\n  width: 100vw;\n  font-size: 5vmin;\n  text-align: center;\n  color: #565b73;\n  padding: 0.5vmin 3vmin 0.5vmin 3vmin;\n  @media (min-width: 400px) {\n    height: 40px;\n    width: 400px;\n    font-size: 20px;\n    padding: 2px 12px 2px 12px;\n  }\n  border: 0;\n  background: rgb(236, 237, 241);\n"]);return Ht=function(){return e},e}function Ft(){var e=Object(l.a)(["\n  height: 6vmin;\n  width: 6vmin;\n  @media (min-width: 400px) {\n    height: 24px;\n    width: 24px;\n  }\n"]);return Ft=function(){return e},e}var Bt=hn()("#CC3300").brighten().hex(),Kt=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).handleCheckboxChange=function(e){var n=e.target.checked;a.setState({remember:n})},a.handleSubmit=function(e){e.preventDefault();var n=a.state.secret;a.props.setSecret(n),a.state.remember&&localStorage.setItem("secret",n)},a.updateSecret=function(e){a.setState({secret:e.target.value})},a.state={remember:!1,secret:""},a}return Object(h.a)(t,[{key:"render",value:function(){return i.a.createElement(U,null,i.a.createElement("form",null,i.a.createElement(Qt,null,i.a.createElement("h1",null,"Communication Client"),i.a.createElement("h5",null,"INFO PAST THIS PAGE IS CONFIDENTIAL"),i.a.createElement("br",null),i.a.createElement("p",null,"Enter the pin"),i.a.createElement("p",null,i.a.createElement("input",{type:"text",name:"action",defaultValue:"login",autoComplete:"off",style:{display:"none"}}),i.a.createElement(Vt,{type:"password",name:"secret",autoComplete:"current-password",value:this.state.secret,onChange:this.updateSecret}),this.props.errMsg&&i.a.createElement(Yt,null,"(",this.props.errMsg,")")),i.a.createElement("p",null,i.a.createElement(Gt,{onClick:this.handleSubmit},i.a.createElement(Wt,null)))),i.a.createElement($t,null,i.a.createElement(ea,{name:"remember",type:"checkbox",checked:this.state.remember,onChange:this.handleCheckboxChange}),"Remember on this device")))}}]),t}(a.Component),Wt=Object(f.b)((function(e){return i.a.createElement("svg",Object.assign({viewBox:"0 0 200 200",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},e),i.a.createElement("path",{d:"M162.5 100c6.9 0 12.5 5.6 12.5 12.5v75c0 6.9-5.6 12.5-12.5 12.5h-125c-6.9 0-12.5-5.6-12.5-12.5v-75c0-6.9 5.6-12.5 12.5-12.5h4.167V58.333C41.667 26.175 67.842 0 100 0s58.333 26.175 58.333 58.333c0 4.559-3.775 8.334-8.333 8.334h-8.333c-4.559 0-8.334-3.775-8.334-8.334C133.333 39.975 118.358 25 100 25c-18.358 0-33.333 14.975-33.333 33.333V100H162.5z",fill:"currentColor",fillRule:"nonzero"}))}))(Ft()),Vt=f.b.input(Ht()),Gt=f.b.button(_t(),"#CC3300"),Qt=f.b.label(Ut()),$t=Object(f.b)(Qt)(It()),Yt=Object(f.b)($t)(Rt(),"#CC3300"),Jt=f.b.input.attrs({type:"checkbox"})(zt()),Zt=f.b.svg(Pt()),qt=f.b.div(At(),(function(e){return e.checked?"#CC3300":"rgb(236, 237, 241)"}),Jt,Bt,Zt,(function(e){return e.checked?"visible":"hidden"})),Xt=f.b.div(Dt()),ea=function(e){var n=e.checked,t=Object(Nt.a)(e,["checked"]);return i.a.createElement(Xt,null,i.a.createElement(Jt,Object.assign({checked:n},t)),i.a.createElement(qt,{checked:n},i.a.createElement(Zt,{viewBox:"0 0 24 24"},i.a.createElement("polyline",{points:"20 6 9 17 4 12"}))))};function na(){var e=Object(l.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  align-items: stretch;\n\n"]);return na=function(){return e},e}var ta=t(234),aa=t(395),ia=function(e){Object(m.a)(t,e);var n=Object(g.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e))._fetchToken=function(){return new Promise((function(e,n){var t=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ACCENT_COLOR:"#CC3300"}).REACT_APP_RUNTIME_DOMAIN?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ACCENT_COLOR:"#CC3300"}).REACT_APP_RUNTIME_DOMAIN:"")+"/getAccessToken",i=x({secret:a.state.secret});fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i}).then(function(){var e=Object(d.a)(u.a.mark((function e(t){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.text());case 4:if(401!==t.status){e.next=11;break}return e.next=7,t.text();case 7:i=e.sent,a.setState({authorized:!1,authError:0===a.state.authCounter?"":i,authCounter:a.state.authCounter+1}),console.error("Authorization failed - check if SECRET env variable is set correctly:",i),n(i);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).then((function(n){void 0!==n&&(a.setState({authorized:!0,authError:"",authCounter:0}),e(n))})).catch((function(e){console.error("Error fetching Access Token:",e),a.setState({displayError:"Error fetching Access Token (".concat(w(e),")")}),n(e)}))}))},a.setSecret=function(e){a.setState({secret:e},(function(){return a.initClients()}))},a.setCallDisplay=function(e){a.setState({callDisplay:e})},a.setCallConnection=function(e){a.callConnection=e},a.getCallConnection=function(){return a.callConnection},a.setCallStartTime=function(e){a.callStartTime=e},a.getCallStartTime=function(){return a.callStartTime},a.setCallNextKeyReset=function(e){a.callNextKeyReset=e},a.getCallNextKeyReset=function(){return a.callNextKeyReset},a.setCallTypingPN=function(e){a.callTypingPN=e},a.getCallTypingPN=function(){return a.callTypingPN},a.setUnreadsCache=function(e,n){a.setState({msgUnreadsCache:v()(a.state.msgUnreadsCache,Object(c.a)({},e,{$set:n}))})},a.setUnreadMsgs=function(e,n){null===e.lastConsumedMessageIndex?e.getMessagesCount().then((function(e){a.setState({msgUnreadsCache:v()(a.state.msgUnreadsCache,Object(c.a)({},n,{$set:e}))})})):e.getUnconsumedMessagesCount().then((function(e){a.setState({msgUnreadsCache:v()(a.state.msgUnreadsCache,Object(c.a)({},n,{$set:e}))})}))},a.setMsgCachePage=function(e,n,t){a.setState({msgCache:v()(a.state.msgCache,Object(c.a)({},e,{$set:n})),pgtrCache:v()(a.state.msgPgtrCache,Object(c.a)({},e,{$set:t}))})},a.addMsgCachePage=function(e,n,t){a.setState({msgCache:v()(a.state.msgCache,Object(c.a)({},e,{$unshift:n})),pgtrCache:v()(a.state.msgPgtrCache,Object(c.a)({},e,{$set:t}))})},a.addMsgCacheMsg=function(e,n){void 0===a.state.msgCache[e]&&a.setState({msgCache:v()(a.state.msgCache,{$merge:Object(c.a)({},e,[])})}),a.setState({msgCache:v()(a.state.msgCache,Object(c.a)({},e,{$push:[n]}))})},a.getToken=function(){return new Promise((function(e,n){if(a.state.token){var t=Object(C.a)(a.state.token),i=Math.floor(Date.now()/1e3),r=t.exp;console.log("Token is expiring in ".concat(r-i,"s")),r-i<300?a._fetchToken().then((function(n){a.setState({token:n}),a.getTokenActive=!1,e(n)})):(a.getTokenActive=!1,e(a.state.token))}else a._fetchToken().then((function(n){a.setState({token:n}),a.getTokenActive=!1,e(n)}))}))},a.initClients=function(){null===a.state.chatClient&&null===a.state.voiceClient&&a.getToken().then((function(e){var n=new aa.Device;n.setup(e,{codecPreferences:["opus","pcmu"],fakeLocalDTMF:!0,enableRingingState:!0}),n.on("ready",(function(e){console.log("voiceClient is ready")})),n.on("error",(function(e){console.log("Twilio.Device Error: ",e),31205===e.code&&a.getToken().then((function(){a.state.chatClient.updateToken(a.state.token),a.state.voiceClient.updateToken(a.state.token),console.log("Token updated after expiration (from voiceClient)")}))})),n.on("incoming",(function(e){console.log("PC: INCOMING event fired from "+e.parameters.From),a.setState({incomingCall:e}),a.setCallConnection(e),e.on("reject",(function(e){a.setState({incomingCall:null})}))})),n.on("cancel",(function(e){console.log("PC: CANCEL event fired"),a.setState({incomingCall:null})})),n.on("connect",(function(e){console.log("PC: CONNECT event fired"),a.setState({incomingCall:null})})),n.on("disconnect",(function(e){console.log("PC: DISCONNECT event fired"),a.setCallDisplay(""),a.setCallStartTime(null),a.setCallTypingPN(!0),a.setCallNextKeyReset(!1)})),console.log("voiceClient is initialized"),a.setState({voiceClient:n}),ta.Client.create(e).then((function(e){a.setState({chatClient:e}),e.getSubscribedChannels().then((function(e){for(var n={},t=0;t<e.items.length;t++){var i=e.items[t];n[i.uniqueName]=i}console.log("chatClient is initialized"),a.setState({chatChannelList:n})})),e.on("channelRemoved",(function(e){null!==a.state.chatChannelList&&a.setState({chatChannelList:v()(a.state.chatChannelList,{$unset:[e.uniqueName]}),msgUnreadsCache:v()(a.state.msgUnreadsCache,{$unset:[e.uniqueName]}),msgCache:v()(a.state.msgCache,{$unset:[e.uniqueName]}),msgPgtrCache:v()(a.state.msgPgtrCache,{$unset:[e.uniqueName]})})})),e.on("channelAdded",(function(e){null!==a.state.chatChannelList&&a.setState({chatChannelList:v()(a.state.chatChannelList,{$merge:Object(c.a)({},e.uniqueName,e)}),msgCache:v()(a.state.msgCache,Object(c.a)({},e.uniqueName,{$set:void 0}))})})),e.on("channelUpdated",(function(e){var n=e.channel,t=e.updateReasons;null!==a.state.chatChannelList&&t.includes("lastMessage")&&a.setState({chatChannelList:v()(a.state.chatChannelList,Object(c.a)({},n.uniqueName,{$set:n}))})})),e.on("tokenAboutToExpire",(function(){a.getToken().then((function(){a.state.chatClient.updateToken(a.state.token),a.state.voiceClient.updateToken(a.state.token),console.log("Token updated before expiration")}))})),e.on("tokenExpired",(function(){a.getToken().then((function(){a.state.chatClient.updateToken(a.state.token),a.state.voiceClient.updateToken(a.state.token),console.log("Token updated after expiration (from chatClient)")}))}))}))}))},a.setChannel=function(e){a.setState({selectedChannel:e})},a.state={selectedChannel:"sms",chatClient:null,chatChannelList:null,voiceClient:null,incomingCall:null,token:null,authorized:!1,authCounter:0,authError:"",secret:localStorage.getItem("secret"),displayError:null,msgUnreadsCache:{},msgCache:{},msgPgtrCache:{},callDisplay:""},a.callConnection=null,a.callStartTime=null,a.callNextKeyReset=!1,a.callTypingPN=!0,a}return Object(h.a)(t,[{key:"componentDidMount",value:function(){this.initClients()}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.state.chatClient&&(this.state.chatClient.removeAllListeners("channelAdded"),this.state.chatClient.removeAllListeners("channelUpdated")),this.state.voiceClient&&(this.state.voiceClient.removeAllListeners("ready"),this.state.voiceClient.removeAllListeners("error"))}},{key:"render",value:function(){return this.state.displayError?i.a.createElement(ra,null,i.a.createElement(I,{msg:"Error occurred: "+this.state.displayError,img:"alert"})):!1===this.state.authorized&&0===this.state.authCounter?i.a.createElement(ra,null):!1===this.state.authorized&&this.state.authCounter<=3?i.a.createElement(ra,null,i.a.createElement(Kt,{setSecret:this.setSecret,errMsg:this.state.authError})):!1===this.state.authorized&&this.state.authCounter>3?i.a.createElement(ra,null,i.a.createElement(I,{msg:"Authorization failed",img:"auth_fail"})):i.a.createElement(i.a.StrictMode,null,i.a.createElement(ra,null,i.a.createElement(ae,{setChannel:this.setChannel,selectedChannel:this.state.selectedChannel,incomingCall:this.state.incomingCall,msgUnreadsCache:this.state.msgUnreadsCache}),i.a.createElement(St,{msgUnreadsCache:this.state.msgUnreadsCache,setUnreadsCache:this.setUnreadsCache,setUnreadMsgs:this.setUnreadMsgs,msgCache:this.state.msgCache,msgPgtrCache:this.state.msgPgtrCache,addMsgCachePage:this.addMsgCachePage,setMsgCachePage:this.setMsgCachePage,addMsgCacheMsg:this.addMsgCacheMsg,setCallDisplay:this.setCallDisplay,callDisplay:this.state.callDisplay,setCallConnection:this.setCallConnection,getCallConnection:this.getCallConnection,setCallStartTime:this.setCallStartTime,getCallStartTime:this.getCallStartTime,setCallNextKeyReset:this.setCallNextKeyReset,getCallNextKeyReset:this.getCallNextKeyReset,setCallTypingPN:this.setCallTypingPN,getCallTypingPN:this.getCallTypingPN,selectedChannel:this.state.selectedChannel,secret:this.state.secret,client:"sms"===this.state.selectedChannel?this.state.chatClient:this.state.voiceClient,channelList:"sms"===this.state.selectedChannel?this.state.chatChannelList:null,incomingCall:this.state.incomingCall})))}}]),t}(a.Component),ra=f.b.div(na());var oa=function(){return i.a.createElement(ia,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(oa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[222,1,2]]]);
//# sourceMappingURL=main.c2b7f316.chunk.js.map